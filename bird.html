<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Flappy Bird Mobile</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            -webkit-user-select: none;
            user-select: none;
            touch-action: manipulation;
        }
        
        body {
            margin: 0;
            padding: 0;
            background: linear-gradient(to bottom, #87CEEB 0%, #98D8E8 100%);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow: hidden;
            width: 100vw;
            height: 100vh;
            height: -webkit-fill-available;
        }
        
        #gameContainer {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
        }
        
        /* Score Display - Top Left */
        #scoreDisplay {
            position: absolute;
            top: 20px;
            left: 20px;
            z-index: 100;
            background: rgba(255, 255, 255, 0.95);
            padding: 12px 20px;
            border-radius: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            min-width: 100px;
            text-align: center;
        }
        
        #scoreLabel {
            font-size: 14px;
            color: #666;
            margin-bottom: 5px;
            font-weight: 600;
        }
        
        #score {
            font-size: 36px;
            font-weight: bold;
            color: #2c3e50;
            line-height: 1;
        }
        
        /* Speed Indicator - Top Right */
        #speedDisplay {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 100;
            background: rgba(255, 255, 255, 0.95);
            padding: 10px 15px;
            border-radius: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            text-align: center;
        }
        
        #speedLabel {
            font-size: 14px;
            color: #666;
            margin-bottom: 3px;
            font-weight: 600;
        }
        
        #speedInfo {
            font-size: 24px;
            font-weight: bold;
            color: #e74c3c;
            line-height: 1;
        }
        
        /* Game Canvas */
        #gameCanvas {
            width: 100%;
            height: 100%;
            display: block;
            background: #87CEEB;
        }
        
        /* Start Button - Centered */
        #startButton {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 200;
            background: linear-gradient(to bottom, #2ecc71, #27ae60);
            color: white;
            border: none;
            padding: 25px 50px;
            font-size: 28px;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            font-weight: bold;
            min-width: 250px;
            transition: all 0.3s;
        }
        
        #startButton:hover, #startButton:active {
            background: linear-gradient(to bottom, #27ae60, #219653);
            transform: translate(-50%, -50%) scale(1.05);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);
        }
        
        /* Restart Button - Shows when game over */
        #restartButton {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 200;
            background: linear-gradient(to bottom, #e74c3c, #c0392b);
            color: white;
            border: none;
            padding: 25px 50px;
            font-size: 28px;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            font-weight: bold;
            min-width: 250px;
            transition: all 0.3s;
            display: none;
        }
        
        #restartButton:hover, #restartButton:active {
            background: linear-gradient(to bottom, #c0392b, #a93226);
            transform: translate(-50%, -50%) scale(1.05);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);
        }
        
        /* Game Over Screen */
        #gameOverScreen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 150;
            flex-direction: column;
        }
        
        .gameOverContent {
            background: white;
            padding: 40px;
            border-radius: 30px;
            text-align: center;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
        }
        
        .gameOverTitle {
            color: #e74c3c;
            font-size: 36px;
            margin-bottom: 20px;
            font-weight: bold;
        }
        
        .resultItem {
            margin: 15px 0;
            font-size: 20px;
        }
        
        .resultValue {
            font-weight: bold;
            color: #2c3e50;
        }
        
        /* Speed Progress Bar */
        #speedBarContainer {
            position: absolute;
            top: 80px;
            left: 20px;
            right: 20px;
            height: 10px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 5px;
            overflow: hidden;
            z-index: 100;
        }
        
        #speedBar {
            height: 100%;
            background: linear-gradient(to right, #2ecc71, #f1c40f, #e74c3c);
            width: 0%;
            transition: width 0.3s;
            border-radius: 5px;
        }
        
        /* Instructions */
        #instructions {
            position: absolute;
            bottom: 30px;
            left: 0;
            width: 100%;
            text-align: center;
            color: white;
            font-size: 18px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
            padding: 0 20px;
            z-index: 100;
        }
        
        .tapIcon {
            display: inline-block;
            animation: float 2s infinite ease-in-out;
            margin-right: 10px;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        /* Mobile Optimizations */
        @media (max-width: 480px) {
            #scoreDisplay {
                top: 15px;
                left: 15px;
                padding: 10px 15px;
                min-width: 80px;
            }
            
            #score {
                font-size: 32px;
            }
            
            #speedDisplay {
                top: 15px;
                right: 15px;
                padding: 8px 12px;
            }
            
            #speedInfo {
                font-size: 22px;
            }
            
            #startButton, #restartButton {
                padding: 20px 40px;
                font-size: 24px;
                min-width: 200px;
            }
            
            #instructions {
                font-size: 16px;
                bottom: 20px;
            }
        }
        
        @media (max-height: 600px) {
            #scoreDisplay {
                top: 10px;
                left: 10px;
                padding: 8px 12px;
            }
            
            #score {
                font-size: 28px;
            }
            
            #speedDisplay {
                top: 10px;
                right: 10px;
                padding: 6px 10px;
            }
            
            #instructions {
                bottom: 15px;
                font-size: 14px;
            }
        }
        
        /* Prevent pull-to-refresh on mobile */
        body {
            overscroll-behavior: none;
        }
        
        /* Hide address bar on mobile */
        html {
            height: -webkit-fill-available;
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <!-- Score Display - Top Left -->
        <div id="scoreDisplay">
            <div id="scoreLabel">SCORE</div>
            <div id="score">0</div>
        </div>
        
        <!-- Speed Display - Top Right -->
        <div id="speedDisplay">
            <div id="speedLabel">SPEED</div>
            <div id="speedInfo">3.0x</div>
        </div>
        
        <!-- Speed Progress Bar -->
        <div id="speedBarContainer">
            <div id="speedBar"></div>
        </div>
        
        <!-- Game Canvas -->
        <canvas id="gameCanvas"></canvas>
        
        <!-- Start Button (Shows initially) -->
        <button id="startButton">START GAME</button>
        
        <!-- Restart Button (Shows after game over) -->
        <button id="restartButton">PLAY AGAIN</button>
        
        <!-- Game Over Screen -->
        <div id="gameOverScreen">
            <div class="gameOverContent">
                <div class="gameOverTitle">GAME OVER</div>
                <div class="resultItem">
                    Final Score: <span id="finalScore" class="resultValue">0</span>
                </div>
                <div class="resultItem">
                    Max Speed: <span id="finalSpeed" class="resultValue">3.0x</span>
                </div>
                <div class="resultItem">
                    Level: <span id="finalLevel" class="resultValue">Beginner</span>
                </div>
            </div>
        </div>
        
        <!-- Instructions -->
        <div id="instructions">
            <span class="tapIcon">ðŸ‘†</span>
            TAP ANYWHERE TO FLY
        </div>
    </div>

    <script>
        // Fullscreen Mobile Flappy Bird
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        
        // DOM Elements
        const startButton = document.getElementById('startButton');
        const restartButton = document.getElementById('restartButton');
        const gameOverScreen = document.getElementById('gameOverScreen');
        const scoreElement = document.getElementById('score');
        const speedInfoElement = document.getElementById('speedInfo');
        const speedBarElement = document.getElementById('speedBar');
        const finalScoreElement = document.getElementById('finalScore');
        const finalSpeedElement = document.getElementById('finalSpeed');
        const finalLevelElement = document.getElementById('finalLevel');
        const instructions = document.getElementById('instructions');
        
        // Game state
        let gameRunning = false;
        let gameStarted = false;
        
        // Set canvas to full screen
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            
            // Adjust bird size based on screen
            bird.width = Math.max(30, canvas.width * 0.08);
            bird.height = Math.max(25, canvas.width * 0.065);
            bird.x = canvas.width * 0.15;
            
            // Adjust pipe width
            pipeWidth = Math.max(40, canvas.width * 0.12);
            
            // Adjust pipe gap based on screen height
            pipeGap = canvas.height * 0.25;
            
            // Reset bird position
            if (gameStarted) {
                bird.y = canvas.height / 2;
            }
        }
        
        // Initialize canvas
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);
        window.addEventListener('orientationchange', () => {
            setTimeout(resizeCanvas, 100);
        });

        // Game variables
        let bird = {
            x: 50,
            y: canvas.height / 2,
            width: 40,
            height: 30,
            gravity: 0.6,
            velocity: 0,
            jump: -14,
            color: '#FFD700',
            wingAngle: 0
        };

        let pipes = [];
        let score = 0;
        let frameCount = 0;
        let pipeGap = 150;
        let pipeWidth = 60;
        
        // Progressive difficulty system
        let basePipeSpeed = 3.0;
        let currentPipeSpeed = basePipeSpeed;
        let maxSpeed = 8.0;
        let speedIncreaseRate = 0.2;
        let pipeInterval = 80;
        let minPipeInterval = 50;
        
        // Difficulty levels
        const difficultyLevels = [
            { name: "Beginner", minScore: 0, speedMultiplier: 1.0, color: "#2ecc71" },
            { name: "Easy", minScore: 5, speedMultiplier: 1.4, color: "#f1c40f" },
            { name: "Medium", minScore: 10, speedMultiplier: 1.8, color: "#e67e22" },
            { name: "Hard", minScore: 15, speedMultiplier: 2.2, color: "#e74c3c" },
            { name: "Expert", minScore: 20, speedMultiplier: 2.6, color: "#c0392b" },
            { name: "Master", minScore: 25, speedMultiplier: 3.0, color: "#8e44ad" },
            { name: "Legend", minScore: 30, speedMultiplier: 3.5, color: "#2c3e50" }
        ];
        
        let currentDifficulty = difficultyLevels[0];
        let maxAchievedSpeed = basePipeSpeed;

        // Background clouds
        let clouds = [];

        // Initialize clouds
        function initClouds() {
            clouds = [];
            for (let i = 0; i < 5; i++) {
                clouds.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * (canvas.height * 0.6),
                    size: Math.random() * 40 + 30,
                    speed: Math.random() * 0.5 + 0.3
                });
            }
        }

        // Calculate current difficulty based on score
        function updateDifficulty() {
            // Find the highest difficulty level
            let newDifficulty = difficultyLevels[0];
            for (let i = difficultyLevels.length - 1; i >= 0; i--) {
                if (score >= difficultyLevels[i].minScore) {
                    newDifficulty = difficultyLevels[i];
                    break;
                }
            }
            
            if (newDifficulty !== currentDifficulty) {
                currentDifficulty = newDifficulty;
                
                // Visual feedback for level up
                speedInfoElement.style.transform = 'scale(1.3)';
                speedInfoElement.style.color = currentDifficulty.color;
                setTimeout(() => {
                    speedInfoElement.style.transform = 'scale(1)';
                }, 300);
            }
            
            // Calculate speed based on score
            const difficultyIncreases = Math.floor(score / 4); // Increase every 4 points
            const speedMultiplier = 1 + (difficultyIncreases * speedIncreaseRate);
            currentPipeSpeed = Math.min(basePipeSpeed * speedMultiplier, maxSpeed);
            
            // Decrease pipe interval
            const intervalReduction = Math.floor(score / 8);
            pipeInterval = Math.max(minPipeInterval, 80 - (intervalReduction * 4));
            
            // Update speed display
            speedInfoElement.textContent = `${currentPipeSpeed.toFixed(1)}x`;
            speedInfoElement.style.color = currentDifficulty.color;
            
            // Update speed bar
            const speedPercentage = (currentPipeSpeed / maxSpeed) * 100;
            speedBarElement.style.width = `${speedPercentage}%`;
            speedBarElement.style.background = currentDifficulty.color;
            
            // Track maximum speed
            if (currentPipeSpeed > maxAchievedSpeed) {
                maxAchievedSpeed = currentPipeSpeed;
            }
        }

        // Draw bird
        function drawBird() {
            ctx.save();
            ctx.translate(bird.x + bird.width / 2, bird.y + bird.height / 2);
            
            // Draw body
            ctx.fillStyle = bird.color;
            ctx.beginPath();
            ctx.ellipse(0, 0, bird.width / 2, bird.height / 2, 0, 0, Math.PI * 2);
            ctx.fill();
            
            // Draw eye
            ctx.fillStyle = 'white';
            ctx.beginPath();
            ctx.arc(8, -5, 6, 0, Math.PI * 2);
            ctx.fill();
            
            ctx.fillStyle = 'black';
            ctx.beginPath();
            ctx.arc(10, -5, 3, 0, Math.PI * 2);
            ctx.fill();
            
            // Draw beak
            ctx.fillStyle = '#FF8C00';
            ctx.beginPath();
            ctx.moveTo(20, 0);
            ctx.lineTo(35, 0);
            ctx.lineTo(20, 8);
            ctx.fill();
            
            // Draw wing with animation
            ctx.save();
            ctx.rotate(Math.sin(bird.wingAngle) * 0.5);
            ctx.fillStyle = '#FFA500';
            ctx.beginPath();
            ctx.ellipse(-5, 8, 15, 8, 0, 0, Math.PI * 2);
            ctx.fill();
            ctx.restore();
            
            bird.wingAngle += 0.2;
            
            ctx.restore();
        }

        // Draw pipes
        function drawPipes() {
            pipes.forEach(pipe => {
                // Top pipe
                ctx.fillStyle = currentDifficulty.color;
                ctx.fillRect(pipe.x, 0, pipeWidth, pipe.topHeight);
                
                // Pipe cap (top)
                ctx.fillStyle = darkenColor(currentDifficulty.color, 20);
                ctx.fillRect(pipe.x - 5, pipe.topHeight - 20, pipeWidth + 10, 20);
                
                // Bottom pipe
                ctx.fillStyle = currentDifficulty.color;
                ctx.fillRect(pipe.x, pipe.topHeight + pipeGap, pipeWidth, canvas.height);
                
                // Pipe cap (bottom)
                ctx.fillStyle = darkenColor(currentDifficulty.color, 20);
                ctx.fillRect(pipe.x - 5, pipe.topHeight + pipeGap, pipeWidth + 10, 20);
                
                // Draw score indicator on passed pipes
                if (pipe.passed) {
                    ctx.fillStyle = 'white';
                    ctx.font = 'bold 24px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText('âœ“', pipe.x + pipeWidth / 2, pipe.topHeight + pipeGap / 2);
                }
            });
        }

        // Helper function to darken colors
        function darkenColor(color, percent) {
            let num = parseInt(color.slice(1), 16);
            let amt = Math.round(2.55 * percent);
            let R = (num >> 16) - amt;
            let G = (num >> 8 & 0x00FF) - amt;
            let B = (num & 0x0000FF) - amt;
            
            return "#" + (0x1000000 + (R < 255 ? R < 1 ? 0 : R : 255) * 0x10000 +
                (G < 255 ? G < 1 ? 0 : G : 255) * 0x100 +
                (B < 255 ? B < 1 ? 0 : B : 255)).toString(16).slice(1);
        }

        // Draw clouds
        function drawClouds() {
            ctx.fillStyle = 'rgba(255, 255, 255, 0.8)';
            clouds.forEach(cloud => {
                ctx.beginPath();
                ctx.arc(cloud.x, cloud.y, cloud.size, 0, Math.PI * 2);
                ctx.arc(cloud.x + cloud.size * 0.8, cloud.y, cloud.size * 0.8, 0, Math.PI * 2);
                ctx.arc(cloud.x - cloud.size * 0.8, cloud.y, cloud.size * 0.8, 0, Math.PI * 2);
                ctx.arc(cloud.x, cloud.y - cloud.size * 0.5, cloud.size * 0.7, 0, Math.PI * 2);
                ctx.fill();
            });
        }

        // Update clouds position
        function updateClouds() {
            const cloudSpeed = 0.5 + (currentPipeSpeed / maxSpeed) * 1.5;
            clouds.forEach(cloud => {
                cloud.x -= cloud.speed * cloudSpeed;
                if (cloud.x < -150) {
                    cloud.x = canvas.width + 150;
                    cloud.y = Math.random() * (canvas.height * 0.6);
                    cloud.size = Math.random() * 40 + 30;
                }
            });
        }

        // Update game state
        function update() {
            if (!gameRunning) return;

            // Update bird
            bird.velocity += bird.gravity;
            bird.y += bird.velocity;

            // Keep bird on screen
            if (bird.y < 0) {
                bird.y = 0;
                bird.velocity = 0;
            }
            if (bird.y + bird.height > canvas.height) {
                gameOver();
                return;
            }

            // Update difficulty
            updateDifficulty();

            // Update pipes
            pipes.forEach((pipe, index) => {
                pipe.x -= currentPipeSpeed;

                // Score point when passing pipe
                if (!pipe.passed && pipe.x + pipeWidth < bird.x) {
                    score++;
                    scoreElement.textContent = score;
                    pipe.passed = true;
                    
                    // Score animation
                    scoreElement.style.transform = 'scale(1.3)';
                    scoreElement.style.color = currentDifficulty.color;
                    setTimeout(() => {
                        scoreElement.style.transform = 'scale(1)';
                        scoreElement.style.color = '#2c3e50';
                    }, 200);
                }

                // Remove off-screen pipes
                if (pipe.x + pipeWidth < 0) {
                    pipes.splice(index, 1);
                }
            });

            // Add new pipe
            if (frameCount % pipeInterval === 0) {
                const minHeight = canvas.height * 0.1;
                const maxHeight = canvas.height * 0.7;
                const topHeight = Math.random() * (maxHeight - minHeight) + minHeight;
                pipes.push({
                    x: canvas.width,
                    topHeight: topHeight,
                    passed: false
                });
            }

            // Check collisions
            checkCollisions();

            frameCount++;
            updateClouds();
        }

        // Check for collisions
        function checkCollisions() {
            for (let pipe of pipes) {
                if (bird.x + bird.width > pipe.x && 
                    bird.x < pipe.x + pipeWidth) {
                    if (bird.y < pipe.topHeight || 
                        bird.y + bird.height > pipe.topHeight + pipeGap) {
                        gameOver();
                        return;
                    }
                }
            }
        }

        // Draw everything
        function draw() {
            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Draw sky gradient
            const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
            gradient.addColorStop(0, '#87CEEB');
            gradient.addColorStop(1, '#98D8E8');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Draw ground
            ctx.fillStyle = '#8B4513';
            ctx.fillRect(0, canvas.height - 80, canvas.width, 80);
            
            // Draw grass
            ctx.fillStyle = '#2ecc71';
            ctx.fillRect(0, canvas.height - 80, canvas.width, 15);
            
            drawClouds();
            drawPipes();
            drawBird();
        }

        // Jump function
        function jump() {
            if (!gameRunning) return;
            bird.velocity = bird.jump;
        }

        // Start game
        function startGame() {
            gameRunning = true;
            gameStarted = true;
            startButton.style.display = 'none';
            restartButton.style.display = 'none';
            gameOverScreen.style.display = 'none';
            instructions.style.opacity = '0.7';
            
            // Reset bird position
            bird.y = canvas.height / 2;
            bird.velocity = 0;
            
            // Start game loop
            gameLoop();
        }

        // Game over
        function gameOver() {
            gameRunning = false;
            
            // Update game over screen
            finalScoreElement.textContent = score;
            finalSpeedElement.textContent = `${maxAchievedSpeed.toFixed(1)}x`;
            finalSpeedElement.style.color = currentDifficulty.color;
            finalLevelElement.textContent = currentDifficulty.name;
            
            // Show restart button and game over screen
            setTimeout(() => {
                restartButton.style.display = 'block';
                gameOverScreen.style.display = 'flex';
            }, 500);
        }

        // Reset game
        function resetGame() {
            // Reset variables
            bird = {
                x: canvas.width * 0.15,
                y: canvas.height / 2,
                width: Math.max(30, canvas.width * 0.08),
                height: Math.max(25, canvas.width * 0.065),
                gravity: 0.6,
                velocity: 0,
                jump: -14,
                color: '#FFD700',
                wingAngle: 0
            };
            
            pipes = [];
            score = 0;
            gameRunning = true;
            gameStarted = true;
            frameCount = 0;
            currentPipeSpeed = basePipeSpeed;
            maxAchievedSpeed = basePipeSpeed;
            pipeInterval = 80;
            currentDifficulty = difficultyLevels[0];
            
            // Reset UI
            scoreElement.textContent = '0';
            scoreElement.style.color = '#2c3e50';
            speedInfoElement.textContent = `${basePipeSpeed.toFixed(1)}x`;
            speedInfoElement.style.color = '#e74c3c';
            speedBarElement.style.width = '0%';
            speedBarElement.style.background = '#2ecc71';
            restartButton.style.display = 'none';
            gameOverScreen.style.display = 'none';
            instructions.style.opacity = '1';
            
            // Initialize clouds
            initClouds();
            
            // Start game
            gameLoop();
        }

        // Game loop
        function gameLoop() {
            update();
            draw();
            if (gameRunning) {
                requestAnimationFrame(gameLoop);
            }
        }

        // Event Listeners
        // Start button
        startButton.addEventListener('click', startGame);
        startButton.addEventListener('touchstart', startGame);
        
        // Restart button
        restartButton.addEventListener('click', resetGame);
        restartButton.addEventListener('touchstart', resetGame);
        
        // Tap to jump (full screen)
        canvas.addEventListener('click', jump);
        canvas.addEventListener('touchstart', (e) => {
            e.preventDefault();
            if (!gameStarted) {
                startGame();
            } else {
                jump();
            }
        });
        
        // Spacebar for keyboard
        document.addEventListener('keydown', (e) => {
            if (e.code === 'Space') {
                e.preventDefault();
                if (!gameStarted) {
                    startGame();
                } else if (gameRunning) {
                    jump();
                }
            }
        });
        
        // Prevent context menu on long press
        canvas.addEventListener('contextmenu', (e) => e.preventDefault());
        
        // Initialize
        initClouds();
        draw(); // Draw initial frame
        
        console.log('Mobile Flappy Bird loaded!');
        console.log('Features:');
        console.log('- Fullscreen mobile layout');
        console.log('- Start button appears first');
        console.log('- Restart button after game over');
        console.log('- Score in top left');
        console.log('- Touch and mouse controls');
        console.log('- Progressive difficulty');
    </script>
</body>
</html>
